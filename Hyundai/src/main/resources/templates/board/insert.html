<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/layout/basic :: setContent(~{this::content})}">
	<th:block th:fragment="content">
		<script src="http://code.jquery.com/jquery-2.2.3.min.js"> </script>
		</br></br>
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-md-6 text-center mb-5">
					<h2 class="heading-section">글 작성</h2>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="table-wrap">
						<table class="table">
							<tr>
								<th >제목</th>
								<td><input type="text" id="btitle" style="width:700px" placeholder="제목 입력"/></td>
							</tr>
							<tr>
								<th>작성자</th>
								<td><input type="text" id="bname" style="width:700px" placeholder="작성자 입력"/></td>
							</tr>
							<tr>
								<th>내용</th>
								<td><textarea id="bcontent" cols="40" style="width:700px;height:200px" placeholder="내용 입력"></textarea></td>
							</tr>
						</table>
						<button id="InsertBtn">Insert Article</button>
					</div>
				</div>
			</div>
		</div>
	</th:block>
</th:block>
<script>
	$("#InsertBtn").on("click", function () {
		var btitle = $("#btitle").val();
	    var bname = $("#bname").val();
	    var bcontent = $("#bcontent").val();
	
	    $.ajax({
	        type: 'post',
	        url: '/articles',
	        headers: {
	        	"Content-Type": "application/json",
	            "X-HTTP-Method-Override": "POST"
	        },
	        dataType: 'text',
	        data: JSON.stringify({
	            bname: bname,
	            btitle: btitle,
	            bcontent: bcontent
	        }),
	        success: function (result) {
	            console.log(result);
	            if (result == 'SUCCESS') {
	                alert("글 등록 완료");
	                location.href='/board/list';
	            }
	        }
	    });
	});
</script>